# fly.toml app configuration file generated for wander-test-minimal on 2025-11-10T16:57:27-06:00
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = 'wander-test-minimal'
primary_region = 'dfw'

# Option 1: Use pre-built image from registry (RECOMMENDED - instant deploys)
# Run ./build-and-push.sh to build and push the prebuilt image
[build]
  image = 'registry.fly.io/wander-test-minimal:prebuilt'

# Option 2: Build from Dockerfile (slower, rebuilds each time, images pulled at runtime)
# Uncomment this and comment out [build] section above to build from scratch
# [build]
#   dockerfile = 'Dockerfile'

# No HTTP service needed - this is an SSH-only machine
# Fly's SSH proxy handles all connections

[[services]]
  protocol = "tcp"
  internal_port = 22

  [[services.ports]]
    port = 22

[[vm]]
  size = 'shared-cpu-2x'
  memory = '2048mb'

# Enable Docker-in-Docker support
[experimental]
  auto_rollback = true

[env]
  DOCKER_HOST = "unix:///var/run/docker.sock"
