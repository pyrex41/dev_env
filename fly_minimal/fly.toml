# fly.toml app configuration file generated for wander-test-minimal on 2025-11-10T16:57:27-06:00
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = 'wander-test-minimal'
primary_region = 'dfw'

# Build configuration
# Option 1: Build from Dockerfile (default for first-time setup)
# Option 2: Use pre-built image after running ./create-prebuilt.sh
[build]
  dockerfile = 'Dockerfile'
  # image = 'registry.fly.io/wander-test-minimal:deployment-XXXXX'  # Use this after running create-prebuilt.sh

# No HTTP service needed - this is an SSH-only machine
# Fly's SSH proxy handles all connections

[[services]]
  protocol = "tcp"
  internal_port = 22

  [[services.ports]]
    port = 22

[[vm]]
  size = 'shared-cpu-2x'
  memory = '2048mb'

# Enable Docker-in-Docker support
[experimental]
  auto_rollback = true

[env]
  DOCKER_HOST = "unix:///var/run/docker.sock"
