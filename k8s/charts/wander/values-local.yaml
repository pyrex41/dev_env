# Local Minikube Configuration
# Optimized for testing on local machine

## API Configuration
api:
  replicaCount: 1

  image:
    repository: wander-api
    tag: local
    pullPolicy: Never  # Use local images, don't pull from registry

  service:
    type: NodePort  # Use NodePort for local access
    port: 8000

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  env:
    NODE_ENV: development
    API_PORT: "8000"
    DEBUG_PORT: "9229"

## Frontend Configuration
frontend:
  replicaCount: 1

  image:
    repository: wander-frontend
    tag: local
    pullPolicy: Never  # Use local images

  service:
    type: NodePort  # Use NodePort for local access
    port: 3000

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  env:
    NODE_ENV: development
    VITE_API_URL: "http://localhost:8000"

## PostgreSQL Configuration (Bitnami)
postgresql:
  enabled: true
  auth:
    username: wander
    password: wander_dev_password
    database: wander_dev

  primary:
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"

    persistence:
      enabled: true
      size: 1Gi  # Small for local testing

## Redis Configuration (Bitnami)
redis:
  enabled: true
  auth:
    password: redis_dev_password

  master:
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "200m"

    persistence:
      enabled: true
      size: 1Gi  # Small for local testing

  replica:
    replicaCount: 0  # No replicas for local testing

## Ingress Configuration
ingress:
  enabled: false  # Use NodePort instead for local testing

## ServiceAccount
serviceAccount:
  create: true
  name: wander-local

## Autoscaling
autoscaling:
  enabled: false  # Disable for local testing

## Security Context (relaxed for local testing)
securityContext:
  runAsNonRoot: false  # More permissive for local dev
  runAsUser: 1000
